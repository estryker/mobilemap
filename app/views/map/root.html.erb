<div id="details" data-role="page" class="details-page" data-theme="b">
  <div data-role="header" data-position="fixed"> 
<!--    <%= link_to "About", about_path, {'data-role' => "button", 'data-icon' => "info", "rel" => "external", "data-rel" => "dialog", "data-transition" => "pop"} %>       -->
<%= link_to "About", '#about', {'data-role' => "button", 'data-icon' => "info", "data-rel" => "dialog", "data-transition" => "pop"} %>  
    <h1> MobileMap</h1> 
   <!--  <%= link_to "Settings", settings_path, {'data-role' => "button", 'data-icon' => "gear", "rel" => "external"} %>   -->
<%= link_to "Settings", '#settings', {'data-role' => "button", 'data-icon' => "gear", "data-transition" => "pop"} %>  
  </div> 
  
  <div data-role="content" id="map_content" data-theme="a">
    
    <div id="map_canvas" > 
      
      <script type="text/javascript">
	/*
         
        */
        // Initialize the map when the jQuery Mobile pageshow event is triggered 
        $('.details-page').on("pageshow", function() { 
	find_position();
        /*if (map == null) {
            // geolocation_success_add_markers will put the markers on the page
	    //navigator.geolocation.getCurrentPosition(geolocation_success_add_markers, geolocation_error, geolocation_options);
	    find_position();
          } */
        }); 

      </script>
    </div>

  </div>


  <div data-role="footer" class="ui-bar" data-position="fixed"> 
    <div data-role="navbar">
      <div class="center-wrapper">
	<ul> 
	  <li>&nbsp</li>
	  <li><%= link_to "New", '#new', {'data-role' => "button", 'data-icon' => "plus", "data-rel" => "dialog", "data-transition" => "pop"} %>  </li>
	    <li>
	      <%= link_to "Add", new_event_path, {'id' => 'add-marker-button', 'data-role' => "button", 'data-icon' => "plus", "rel" => "external", "data-rel" => "dialog", "data-transition" => "pop"} %> 
	    </li>
	  <li>
	    <button onclick="find_position()" data-icon="plus" data-iconpos="top">Locate</button>
	  </li>
	  <li>
	    <!--
	    <div  data-role="button" >
	       <%= link_to "Locate", '#', {'data-role' => "button", 'data-icon' => "plus", 'onclick'=>"find_position()"} %>
	    </div>
             -->
	  </li>
	</ul>
      </div>
    </div>
  </div> 

</div> 

<div data-role="page" id="about" data-theme="b" >
  <div data-role="header" data-position="fixed"> 
    <h1> About MobileMap </h1>
  </div>  
  <div data-role="content" id="map_content" data-theme="a">
    A test application for JQuery Mobile riding on Rails. 
  </div>
</div>

 <div data-role="page" id="settings"  data-theme="b" >
    <div data-role="header" data-position="fixed" data-add-back-btn="true"> 
      <h1> Settings</h1> 
    </div> 
    
   <div data-role="content" data-theme="a">
    Settings go here
   </div>
</div>


<div id="new" data-role="page" class="details-page" data-theme="b">
  <div data-role="header" data-position="fixed"> 
    <%= link_to 'MobileMap', root_path, 'data-icon' => 'back', 'data-ajax' => false %>
    <h1>New event</h1>
  </div> 
   
  <div data-role="content" id="map_form" data-theme="b" >
    <%= form_for @event do |f| %>
       <%= f.hidden_field :latitude %>
       <%= f.hidden_field :longitude %>
       <%= f.label :Text %> 
       <%= f.text_field :text %>
       <%= f.submit "Submit" %>
    <% end %>
  </div>
</div>


